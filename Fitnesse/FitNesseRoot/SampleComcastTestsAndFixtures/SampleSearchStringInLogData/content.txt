!style_blue{'''This sample shows how you can perform a string search in a log.'''}

!style_red {'''Input Column Descriptions'''}

!style_green{'''input - contains the data to be searched'''}
!style_green{'''searchtext - contains the search string'''}

!style_red {'''Output Column Descriptions'''}

!style_green {'''performSearch? - returns whether the string is found or not found.'''} 

!********> Variables
!define host {10.255.185.174}
!define username {root}
!define password {c0mcast!}
!define BAR {!-|-!}
!define SPACE {!-/s-!}
!define path {/opt/cisco/usrm/EventLog}
*************!

!style_blue{'''1. Import package - common to all wiki pages'''}.

|Import          |
|com.comcast.core|

!style_blue{'''2. Log into the VSRM VM using the Run Command fixture'''}.

!|RunCommand                              |
|host   |username   |password   |connect? |
|${host}|${username}|${password}|connected|

!style_blue{'''3. Find most recent log file in Event Log.'''}.

!|RunCommand                                                        |
|command                                                   |=output?|
|cd ${path};ls -Art ${BAR} tail -n 1|filename        |

!style_blue{'''4. Put together a tail log command using the Concatenate String fixture.'''}.

!|ConcatenateString                                                           |
|string1            |string2         |string3  |string4=|=ConcatenatedString()|
|/s tail -f ${SPACE}|/opt/cisco/usrm/|EventLog/|filename|command              |

!style_blue{'''5. Use the concatenated command to run in the Run Command fixture and capture the output for 30 seconds using the timeoutinseconds column.'''}.

!|RunCommand                        |
|command=|timeoutinseconds|=output()|
|command |30              |         |

!style_blue{'''6. Perform a string search of the output captured by tailing the log for "Cisco Systems" and "Krishna".'''}.

!|SearchString                   |
|input=|searchtext|performsearch?|
|      |Cisco Systems|Found         |
|      |Krishna   |Not Found     |

