!style_blue{'''The Run Splunk query fixture allows you to run splunk queries.'''}

!style_blue{'''NOTE: Make sure that the SSL java security protocol is commented out in the java security file. If it is not, this fixture will fail.'''}

!style_red {'''Input Column Descriptions'''}

!style_green{'''host - contains the IP address or FQDN of Splunk Instance'''}
!style_green{'''username - contains the username used to log into splunk'''}
!style_green{'''password - contains the password used to log into splunk'''}
!style_green{'''query - contains the splunk query'''}
!style_green{'''key - contains specific value to return (e.g. Response)'''}

!style_red {'''Output Column Descriptions'''}

!style_green {'''connect - indicates whether user is logged into splunk - connected versus not connected'''} 
!style_green {'''run - contains the results from the splunk query'''} 

!********> Variables
!define splunk_host {10.253.179.100}
!define splunk_username {admin}
!define splunk_password {Beaumaris1}
!define splunk_bar {|}
*************!

!style_blue{'''1. Import package - common to all wiki pages'''}.

|Import          |
|com.comcast.core|

!style_blue{'''2. Log into Splunk.'''}

!|RunSplunkQuery                                               |
|host          |username          |password          |connect()|
|${splunk_host}|${splunk_username}|${splunk_password}|connected|

!style_blue{'''3. Execute splunk query.'''}

!|RunSplunkQuery                                                                               |
|query                                                                                  |=run()|
|search index=dsm "ValidatePlayEligibility" METHOD=POST 102216f8d7fd414e8ebe045020f59da7 |      |

!|RunSplunkQuery                                                                               |
|query                                                                                  |=run()|
|search index=dsm clientid=ff650000* |      |

!|RunSplunkQuery                                                                               |
|query                                                                                  |=statsCount()|
|search index=dsm "VODPurchaseData" METHOD=POST ${splunk_bar} stats distinct_count(Body) |      |

!style_blue{'''4. Execute splunk query and return output for a specific piece of data (e.g. Response'''}

!|RunSplunkQuery                                                                                              |
|query                                                                                  |key            |run()|
|search index=dsm "ValidatePlayEligibility" METHOD=POST 102216f8d7fd414e8ebe045020f59da7|Response Status|200  |

!|RunSplunkQuery                                                                               |
|query                                                                                  |=statsCount()|
|search index=dsm "idValue" METHOD=POST 08a6d41a78404241994cd2e1c5c0b39c ${splunk_bar} stats count(Body) |      |
