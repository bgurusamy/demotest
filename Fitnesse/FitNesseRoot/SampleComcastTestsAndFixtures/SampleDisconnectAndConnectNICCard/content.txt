!style_blue{'''This sample shows how NIC card is disconnected and connected.'''}

!style_blue{'''This fixture is also used with the Is Machine Pingable fixture. Is Machine Pingable allows you to specify the Ip address of a machine and indicates whether the machine is or is not reachable'''}

!style_red {'''Disconnect and connect NIC card'''}

!style_red {'''Input Column Descriptions'''}

!style_green{'''datacenterName - the name of the host on which the virtual machine resides'''}
!style_green{'''vmname - the name (label) of the virtual machine on the host'''}

!style_red {'''Output Column Descriptions'''}

!style_green{'''disableNIC - Disconnect the NIC card'''}
!style_green{'''enableNIC - Connect the NIC card'''}

!style_red {'''Vcenter login and logout'''}

!style_red {'''Input Column Descriptions'''}

!style_green{'''vcenterUrl - url address of the vcenter instance that contains your virtual machine'''}
!style_green{'''userName - the username used to log into Vcenter'''}
!style_green{'''password- the password for the username that logs into vcenter'''}

!style_red {'''Output Column Descriptions'''}

!style_green {'''vcenterloginsuccessful - indicates that user should log into Vcenter'''} 
!style_green {'''vcenterlogoutsuccessful - indicates that user should log out of Vcenter'''} 

!style_red {'''Is Machine Pingable'''}

!style_red {'''Input Column Descriptions'''}

!style_green{'''ip - ip address of the virtual machine'''}

!style_red {'''Output Column Descriptions'''}

!style_green{'''ping - indicates whether the ip should be reachable or not reachable'''}

!style_blue{'''Variables:'''}

!define vcenter_url {10.253.179.101}
!define username {Administrator}
!define password {c0mcast!}
!define datacenter_name {QAVCP_DTW}
!define vm_name {vtwatf-dtw-3802}
!define vm_ip {10.255.185.97}

!style_blue{'''1. Import package - common to all wiki pages'''}.

|Import          |
|com.comcast.core|
----
!style_blue{'''2. Log into the Downingtown vCenter instance'''}

!|PowerOnOffVM                                                 |
|vcenterUrl    |userName   |password   |vcenterloginsuccessful?|
|${vcenter_url}|${username}|${password}|Success                |

----
!style_blue{'''3. Use the !-PowerOnOffVM-! fixture !-disableNIC-! to disconnect the NIC card'''}

!style_red{ '''Expected Results - VM NIC is disconnected successfully.'''}

!|PowerOnOffVM                            |
|datacenterName    |vmName    |disableNIC?|
|${datacenter_name}|${vm_name}|Success    |

----
!style_blue{'''4. Wait 60 seconds.'''}

!|AddDelay                  |
|time|delay?                |
|60  |delayed for 60 seconds|

----
!style_blue{'''5. Determine if the VM is reachable on the network'''}

!style_red{ '''Expected Results - the VM is not reachable due to NIC being disabled'''}

!|IsMachinePingable    |
|ip      |ping?        |
|${vm_ip}|not reachable|

----
!style_blue{'''6. Use the PowerOnOffVM fixture to connect the NIC card'''}

!style_red{ '''Expected Results - VM NIC is reconnected successfully'''}

!|PowerOnOffVM                           |
|datacenterName    |vmName    |enableNIC?|
|${datacenter_name}|${vm_name}|Success   |

----
!style_blue{'''7. Wait 60 seconds using the Add Delay fixture.'''}

!|AddDelay                  |
|time|delay?                |
|60  |delayed for 60 seconds|

----
!style_blue{'''8. Determine if the VM is reachable on the network'''}

!style_red{ '''Expected Results - the VM is now reachable again from the network.'''}

!|IsMachinePingable|
|ip      |ping?    |
|${vm_ip}|reachable|

----
!style_blue{'''9. Log out of Vcenter.'''}

!|PowerOnOffVM           |
|vcenterlogoutsuccessful?|
|Success                 |

----