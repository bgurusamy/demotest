!style_blue{'''The Validate XML fixture allows you to validate the contents of html xml messages. This fixture can be used in tests where you have an xml response and want to'''}
!style_blue{'''check the tags, order, or values of the html xml or the tag attributes, parent tag or attribute values. Users can pick and choose what they want to check.'''}

!style_red {'''Input Column Descriptions'''}

!style_green{'''inputXML - The xml that will be parsed in order to validate the format'''}
!style_green{'''tag - contains the tag that you want to validate'''}
!style_green{'''present - contains true or false - indicates presence or absence of tag'''}
!style_green{'''order - a number that indicates the order of the tag in the message'''}
!style_green{'''tagvalue - the actual value of the tag'''}
!style_green{'''attribute - contains a tag attribute'''}
!style_green{'''attribute value - contains the attribute value'''}

!style_red {'''Output Column Descriptions'''}

!style_green {'''formatXML - message indicating the success of the parsing'''} 

!********> Variables
!define sampleClientSessionId {000000199d4d:E3427967}
!define sampleHostMac {000000199d4d}
!define sampleIpAddress {10.252.61.88}
!define sampleIpPort {1585}
!define sampleProfile {A28}
!define sampleStreamingZone {9013}
!define sampleQamNameValue1 {1111}
!define sampleQamNameValue2 {2222}
!define sampleLocalityType {PG}
!define sampleLocalityValue {65015}
!define sampleContentIdType {ATP}
!define sampleContentIdValue {indemand.comINTL0412000006726460}
!define sampleSignalingUrl {http://10.252.61.88:80/}
*************!

!style_blue{'''1. Import package - common to all wiki pages'''}.

!|Import         |
|com.comcast.core|

!style_blue{'''2. Validate Xml fixture will take the Session Setup Request and parse it.'''}

!|ValidateXml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|inputxml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |formatxml?|
|<SetupSession xmlns="urn:com:comcast:ngsrm:s1:2010:12:03" serviceName="VOD" clientSessionId="${sampleClientSessionId}" localTime="2015-06-05T01:27:53-53:37" usage="START"><TargetClient hostMAC="${sampleHostMac}" order="3" ipAddress="${sampleIpAddress}" ipPort="${sampleIpPort}" profile="${sampleProfile}" /><RentalTrace existingRentalWasApplied="N" timeClientOriginated="2015-06-05T05:27:53Z" /><DeviceLocation streamingZone="${sampleStreamingZone}"><QamList><QamName value="${sampleQamNameValue1}">${sampleStreamingZone}.20001</QamName><QamName value="${sampleQamNameValue2}">${sampleStreamingZone}.20001</QamName></QamList><Locality type="${sampleLocalityType}" order="2" value="${sampleLocalityValue}" /></DeviceLocation><ContentId idType="${sampleContentIdType}" idValue="${sampleContentIdValue}" /><SignalingURL order="1" URL="${sampleSignalingUrl}" /></SetupSession>|true      |

!style_blue{'''3. Validate Xml fixture below contains a separate tag on each row, checks if present, checks the order and will return the tag value'''}

!|ValidateXml                |
|tag           |present?|order?|tagvalue? |
|SetupSession  |true    |1     |          |
|TargetClient  |true    |2     |          |
|RentalTrace   |true    |3     |          |
|DeviceLocation|true    |4     |          |
|QamList       |true    |5     |          |
|QamName       |true    |6     |${sampleStreamingZone}.20001|
|QamName       |true    |7     |${sampleStreamingZone}.20001|
|Locality      |true    |8     |          |
|ContentId     |true    |9     |          |
|SignalingURL  |true    |10    |          |

!style_blue{'''4. Validate Xml fixture below contains a separate attribute on each row, checks if present, checks the parent tag and will return the attribute value.'''}

!|ValidateXml                                                           |
|attribute               |present?|tag?          |attributevalue?                    |
|clientSessionId         |true    |SetupSession  |${sampleClientSessionId}              |
|localTime               |true    |SetupSession  |                                   |
|serviceName             |true    |SetupSession  |VOD                                |
|usage                   |true    |SetupSession  |START                              |
|xmlns                   |true    |SetupSession  |urn:com:comcast:ngsrm:s1:2010:12:03|
|hostMAC                 |true    |TargetClient  |${sampleHostMac}                       |
|ipAddress               |true    |TargetClient  |${sampleIpAddress}                       |
|ipPort                  |true    |TargetClient  |${sampleIpPort}                               |
|profile                 |true    |TargetClient  |${sampleProfile}                               |
|existingRentalWasApplied|true    |RentalTrace   |N                                  |
|timeClientOriginated    |true    |RentalTrace   |               |
|streamingZone           |true    |DeviceLocation|${sampleStreamingZone}                               |
|value                   |true    |QamName       |${sampleQamNameValue1}                               |
|type                    |true    |Locality      |${sampleLocalityType}                                 |
|value                   |true    |QamName       |${sampleQamNameValue2}                               |
|idType                  |true    |ContentId     |${sampleContentIdType}                                |
|idValue                 |true    |ContentId     |${sampleContentIdValue}   |
|URL                     |true    |SignalingURL  |${sampleSignalingUrl}            |
|order                   |true    |TargetClient  |3                                  |
|order                   |true    |Locality      |2                                  |
|order                   |true    |SignalingURL  |1                                  |
